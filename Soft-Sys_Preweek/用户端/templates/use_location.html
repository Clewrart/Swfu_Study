<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>车位信息</title>
    <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" name="viewport" />
    <meta content="yes" name="apple-mobile-web-app-capable" />
    <meta content="black" name="apple-mobile-web-app-status-bar-style" />
    <meta content="telephone=no" name="format-detection" />
    <link rel="stylesheet" href="{{url_for('static',filename='css/style.css')}}">
    <link rel="stylesheet" href="{{url_for('static',filename='css/use_location.css')}}">
    <link rel="stylesheet" href="{{url_for('static',filename='css/font-awesome-4.7.0/css/font-awesome.css')}}">
    <script type="text/javascript" src="{{url_for('static',filename='js/jquery-3.7.1.js')}}"></script>
    <style>
        button {
            padding: 3px;
        }
        
        #information {
            text-align: left;
        }
    </style>
    <script>
        $(document).ready(function() {
            $(".detail").click(function() {
                // 获取点击按钮的父元素 .item
                var item = $(this).closest('.item');

                // 找到父元素 .item 内的 .theDetail，并显示
                item.find('.theDetail').show();
            });
            // 点击关闭按钮隐藏模态框
            $(".close").click(function() {
                $(".theDetail").hide();
            });

            // 点击模态框外部区域隐藏模态框
            $(window).click(function(event) {
                if ($(event.target).is(".theDetail")) {
                    $(".theDetail").hide();
                }
            });
        })
    </script>
</head>

<body>
    <section class="aui-flexView">
        <header class="aui-navBar aui-navBar-fixed"><a href="{{ url_for('index') }}" class="aui-navBar-item"><i class="icon icon-return"></i></a>
            <div class="aui-center"><span class="aui-center-title">智能车辆车位信息系统</span></div><a href="javascript:;" class="aui-navBar-item"><i class="icon icon-sys"></i></a></header>
        <section class="aui-scrollView">
            <div class="aui-flex b-line">
                <div class="aui-flex-box">
                    <h2>车位信息</h2>
                </div>
                <div class="aui-arrow"><span></span></div>
            </div>
            <div class="aui-car-list">
                {% for car in cars %}
                <a href="javascript:;" class="aui-flex b-line item">
                    <div class="aui-car-img">
                        <img src="../static/images/{{ car['carinfo']['cartype'] }}.png" alt=""></div>
                    <div class="aui-flex-box">
                        <h1>{{ car['address'] }}</h1>
                        <h1>{{ car['carinfo']['carnum'] }}</h1>
                        <h2>{% if car['status'] == 1 %} 状态：车位内 {% elif car['status'] == 2 %} 状态：已预约 {% elif car['status'] == 3 %} 状态：<span style="color: red;">停车时间异常</span> {% endif %}&nbsp;&nbsp;&nbsp;<button class="detail">停车详情</button></h2>
                    </div>
                    <!-- 详情界面, 默认不显示 -->
                    <div class="modal theDetail" style="display: none;">
                        <div class="modal-content">
                            <span class="close">&times;</span>
                            <h2>车位详情</h2><br>
                            <div id="information">
                                <p>车牌号：{{ car['carinfo']['carnum'] }}</p>
                                <p>车位：{{ car['address'] }}</p>
                                <p>预约状态：{% if car['status'] == 1 %} 车位内 {% elif car['status'] == 2 %} 已预约 {% elif car['status'] == 3 %} <span style="color: red;">停车时间异常</span> {% endif %}</p>
                            </div>
                        </div>
                    </div>
                </a>

                {% endfor %}
            </div>
        </section>
    </section>
</body>

</html>